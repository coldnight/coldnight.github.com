<!DOCTYPE html>
<html lang="en">
<head>
  
    <title>点阵笔报告 :: Taking Smart Notes With Org-mode</title>
  
  <meta http-equiv="content-type" content="text/html; charset=utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<meta name="description" content="难点  高扩展性系统设计：高度可复用的表结构、系统组件间的依赖关系梳理和数据驱动前端展示的设计思想。 数据流转环节多：数据目前会涉及到从业务到 Kafka 再到 Hive 表中，然后再次拿出计算聚合形成 DWS 落到 Hive 中，再次通过 DWS 聚合形成 ADS，最后落到业务 MongoDB 供前端渲染。 宽表涉及业务方比较多（可能需要支持）。  现存技术栈  Spark &amp;ndash; 资源是否就绪？ crontab &#43; Python script(pyhive) &amp;ndash; 存在扩容问题 热数据 MongoDB ？冷数据 Hive？ AirFlow 进行数据间的依赖管理 AirFlow &#43; Spark  一些零散的想法  原始打点数据从 Kafka 中获取放入 MongoDB 或 Redis 中，然后 DWS 计算落盘 Hive，通过数据仓储技术形成 DWS 宽表。 ADS 直接通过 pyhive 读取 DWS 产生，覆盖 MongoDB 针对业务。  数据驱动报告 如何能做到数据驱动报告，而不是每次修改都需要全链路的调整？
面向水平扩展设计 数据能够进行切片，派发到不同的实例去分析处理产生新的输出，支持水平进行扩展。
面向垂直扩展设计 数据可以增加任意的环节进行加工处理。
参考  需求背景 需求 PRD 打点数据  名词解释  DWS：Data Warehouse Service ADS：Analyze Data Service  参考：数仓名词。" />
<meta name="keywords" content="" />
<meta name="robots" content="noodp" />
<link rel="canonical" href="https://www.linuxzen.com/notes/notes/20210818115146-%E7%82%B9%E9%98%B5%E7%AC%94%E6%8A%A5%E5%91%8A/" />




<link rel="stylesheet" href="https://www.linuxzen.com/notes/assets/style.css">






<link rel="apple-touch-icon" href="https://www.linuxzen.com/notes/img/apple-touch-icon-192x192.png">

  <link rel="shortcut icon" href="https://www.linuxzen.com/notes/img/favicon/orange.png">



<meta name="twitter:card" content="summary" />



<meta property="og:locale" content="en" />
<meta property="og:type" content="article" />
<meta property="og:title" content="点阵笔报告">
<meta property="og:description" content="难点  高扩展性系统设计：高度可复用的表结构、系统组件间的依赖关系梳理和数据驱动前端展示的设计思想。 数据流转环节多：数据目前会涉及到从业务到 Kafka 再到 Hive 表中，然后再次拿出计算聚合形成 DWS 落到 Hive 中，再次通过 DWS 聚合形成 ADS，最后落到业务 MongoDB 供前端渲染。 宽表涉及业务方比较多（可能需要支持）。  现存技术栈  Spark &amp;ndash; 资源是否就绪？ crontab &#43; Python script(pyhive) &amp;ndash; 存在扩容问题 热数据 MongoDB ？冷数据 Hive？ AirFlow 进行数据间的依赖管理 AirFlow &#43; Spark  一些零散的想法  原始打点数据从 Kafka 中获取放入 MongoDB 或 Redis 中，然后 DWS 计算落盘 Hive，通过数据仓储技术形成 DWS 宽表。 ADS 直接通过 pyhive 读取 DWS 产生，覆盖 MongoDB 针对业务。  数据驱动报告 如何能做到数据驱动报告，而不是每次修改都需要全链路的调整？
面向水平扩展设计 数据能够进行切片，派发到不同的实例去分析处理产生新的输出，支持水平进行扩展。
面向垂直扩展设计 数据可以增加任意的环节进行加工处理。
参考  需求背景 需求 PRD 打点数据  名词解释  DWS：Data Warehouse Service ADS：Analyze Data Service  参考：数仓名词。" />
<meta property="og:url" content="https://www.linuxzen.com/notes/notes/20210818115146-%E7%82%B9%E9%98%B5%E7%AC%94%E6%8A%A5%E5%91%8A/" />
<meta property="og:site_name" content="Taking Smart Notes With Org-mode" />

  
    <meta property="og:image" content="https://www.linuxzen.com/notes/img/favicon/orange.png">
  

<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">


  <meta property="article:published_time" content="2021-08-18 11:51:00 &#43;0800 &#43;0800" />












</head>
<body class="orange">


<div class="container center headings--one-size">

  <header class="header">
  <div class="header__inner">
    <div class="header__logo">
      <a href="https://www.linuxzen.com/notes/">
  <div class="logo">
    Terminal
  </div>
</a>

    </div>
    
      <div class="menu-trigger">menu</div>
    
  </div>
  
    <nav class="menu">
  <ul class="menu__inner menu__inner--desktop">
    
      
        
          <li><a href="/notes/articles/notes/"> Topics</a></li>
        
      
        
          <li><a href="/notes/articles/">Articles</a></li>
        
      
        
          <li><a href="/notes/notes/">Notes</a></li>
        
      
      
    

    
  </ul>

  <ul class="menu__inner menu__inner--mobile">
    
      
        <li><a href="/notes/articles/notes/"> Topics</a></li>
      
    
      
        <li><a href="/notes/articles/">Articles</a></li>
      
    
      
        <li><a href="/notes/notes/">Notes</a></li>
      
    
    
  </ul>
</nav>

  
</header>


  <div class="content">
    
<div class="post">
  <h1 class="post-title">
    <a href="https://www.linuxzen.com/notes/notes/20210818115146-%E7%82%B9%E9%98%B5%E7%AC%94%E6%8A%A5%E5%91%8A/">点阵笔报告</a></h1>
  <div class="post-meta">
    
      <span class="post-date">
        2021-08-18 
      </span>
    
    
    <span class="post-author">:: [Gray King]</span>
    
  </div>

  

  

  

  <div class="post-content"><div>
        <h2 id="难点">难点<a href="#难点" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>高扩展性系统设计：高度可复用的表结构、系统组件间的依赖关系梳理和数据驱动前端展示的设计思想。</li>
<li>数据流转环节多：数据目前会涉及到从业务到 Kafka 再到 Hive 表中，然后再次拿出计算聚合形成 DWS 落到 Hive 中，再次通过 DWS 聚合形成 ADS，最后落到业务 MongoDB 供前端渲染。</li>
<li>宽表涉及业务方比较多（可能需要支持）。</li>
</ul>
<h2 id="现存技术栈">现存技术栈<a href="#现存技术栈" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>Spark                            &ndash; 资源是否就绪？</li>
<li>crontab + Python script(pyhive)  &ndash; 存在扩容问题</li>
<li>热数据 MongoDB ？冷数据 Hive？</li>
<li>AirFlow 进行数据间的依赖管理</li>
<li>AirFlow + Spark</li>
</ul>
<h2 id="一些零散的想法">一些零散的想法<a href="#一些零散的想法" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>原始打点数据从 Kafka 中获取放入 MongoDB 或 Redis 中，然后 DWS 计算落盘 Hive，通过数据仓储技术形成 DWS 宽表。</li>
<li>ADS 直接通过 pyhive 读取 DWS 产生，覆盖 MongoDB 针对业务。</li>
</ul>
<h2 id="数据驱动报告">数据驱动报告<a href="#数据驱动报告" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>如何能做到数据驱动报告，而不是每次修改都需要全链路的调整？</p>
<h2 id="面向水平扩展设计">面向水平扩展设计<a href="#面向水平扩展设计" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>数据能够进行切片，派发到不同的实例去分析处理产生新的输出，支持水平进行扩展。</p>
<h2 id="面向垂直扩展设计">面向垂直扩展设计<a href="#面向垂直扩展设计" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<p>数据可以增加任意的环节进行加工处理。</p>
<h2 id="参考">参考<a href="#参考" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li><a href="http://wiki.17zuoye.net/pages/viewpage.action?pageId=66526675">需求背景</a></li>
<li><a href="http://wiki.17zuoye.net/pages/viewpage.action?pageId=66528333">需求 PRD</a></li>
<li><a href="http://wiki.17zuoye.net/pages/viewpage.action?pageId=66528333">打点数据</a></li>
</ul>
<h2 id="名词解释">名词解释<a href="#名词解释" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<ul>
<li>DWS：Data Warehouse Service</li>
<li>ADS：Analyze Data Service</li>
</ul>
<p>参考：<a href="http://wiki.17zuoye.net/pages/viewpage.action?pageId=54824596">数仓名词</a>。</p>
<h2 id="预想方案">预想方案<a href="#预想方案" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h2>
<h3 id="数据生产">数据生产<a href="#数据生产" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>AirFlow + Spark，Airflow 调度 Spark 任务。</p>
<ol>
<li>通过大数据平台预处理 ODS 写入单独的表；</li>
<li>将所需 ODS 从大数据主集群拷贝到现有 Spark + Hadoop 集群；</li>
<li>Spark 运行任务提供 DWS 产生数据宽表，落到当前 Hadoop 集群，同时写入（Kafka）大数据主集群；</li>
<li>本地保留一定时段的 DWS 数据；</li>
<li>查看本地 DWS 数据是否满足 ADS，如不满足则从主集群拷贝；</li>
<li>运行 ADS 写入 Kafka 同时落盘大数据主集群 Hive 和 MongoDB。</li>
</ol>
<p>问题：</p>
<ul>
<li>题库元数据同步</li>
<li>用户数据同步</li>
</ul>
<h3 id="数据服务">数据服务<a href="#数据服务" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>读取 MongoDB 数据提供给前端数据。</p>
<h3 id="数据展示-报告-dsl">数据展示：报告 DSL<a href="#数据展示-报告-dsl" class="hanchor" ariaLabel="Anchor">&#8983;</a> </h3>
<p>是否可以通过一套高度抽象的模版系统，根据数据更快更方便的生成报告，比如参考 Jinja2 或者 Vue 现在的模版语法：</p>
<pre><code class="language-nil" data-lang="nil">{% for c in contents %}
# {{ c.title }}
{{ c.description }}
{% endfor %}
</code></pre>
      </div></div>

  

  

</div>

  </div>

  
    <footer class="footer">
  <div class="footer__inner">
    
      <div class="copyright">
        <span>© 2021 Powered by <a href="http://gohugo.io">Hugo</a></span>
    
        <span>:: Theme made by <a href="https://twitter.com/panr">panr</a></span>
      </div>
  </div>
</footer>

<script src="https://www.linuxzen.com/notes/assets/main.js"></script>
<script src="https://www.linuxzen.com/notes/assets/prism.js"></script>




<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.css" integrity="sha384-RZU/ijkSsFbcmivfdRBQDtwuwVqK7GMOw6IMvKyeWL2K5UAlyp6WonmB8m7Jd0Hn" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/katex.min.js" integrity="sha384-pK1WpvzWVBQiP0/GjnvRxV4mOb0oxFuyRxJlk6vVw146n3egcN5C925NCP7a7BY8" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.13.13/dist/contrib/auto-render.min.js" integrity="sha384-vZTG03m+2yp6N6BNi5iM4rW4oIwk5DfcNdFfxkk9ZWpDriOkXX8voJBFrAO7MpVl" crossorigin="anonymous"
    onload="renderMathInElement(document.body);"></script>


  
</div>

</body>
</html>
