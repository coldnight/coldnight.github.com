<!DOCTYPE html>
<html lang="zh-cn">
<title>单调时钟与墙上时钟 | Taking Smart Notes With Org-mode</title>
<meta charset="utf-8">
<meta name="generator" content="Hugo 0.83.1" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="https://www.linuxzen.com/notes/css/index.css">
<link rel="stylesheet" href="https://www.linuxzen.com/notes/css/classes.css">
<link rel="canonical" href="https://www.linuxzen.com/notes/notes/20210722073012-%E5%8D%95%E8%B0%83%E6%97%B6%E9%92%9F%E4%B8%8E%E5%A2%99%E4%B8%8A%E6%97%B6%E9%92%9F/">
<link rel="alternate" type="application/rss+xml" href="" title="Taking Smart Notes With Org-mode">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>


<body>

<header class="icons">
  
    <a href="https://www.linuxzen.com/notes/">Taking Smart Notes With Org-mode</a>
  
  
    <nav>
    
      <a href="/notes/articles/notes/" >
        
           Topics
        
      </a>
    
      <a href="/notes/articles/" >
        
          Articles
        
      </a>
    
      <a href="/notes/notes/" >
        
          Notes
        
      </a>
    
    </nav>
  
  
</header>

<article>
  <header>
    <h1>单调时钟与墙上时钟</h1>
    <time datetime="2021-07-22T07:30:00&#43;08:00">July 22, 2021</time>
  </header>
  <h2 id="墙上时钟">墙上时钟</h2>
<p>根据某个日历返回当前的日期与时间。</p>
<ul>
<li>Linux 上的 <code>clock_gettime(CLOCK_REALTIME)</code></li>
<li>Java 中的 <code>System.currentTimeMills()</code></li>
</ul>
<p>会返回 1970-01-01（UTC）的时间戳（秒和毫秒）。</p>
<p>墙上时钟会和 NTP 服务器同步产生跳跃导致一些奇怪的问题。</p>
<h2 id="单调时钟">单调时钟</h2>
<p>更适合测量持续时间段（时间间隔），如超时或服务的响应时间。保证总是向前（不会出现墙上时钟的回拨现象）。</p>
<ul>
<li>Linux 上的 <code>clock_gettime(CLOCK_MONOTONIC)</code></li>
<li>Java 中的 <code>System.nanoTime()</code></li>
</ul>
<p>单调时钟多个节点的对比没有任何意义，多路 CPU 可能有单独的计时器，且不与其他 CPU 进行同步。由操作系统进行补偿它们之间的偏差。</p>
<p>NTP 检测到本地石英比时间服务器更快或者更慢，NTP 会调整本地石英的震动频率（摆动），最大幅度为 0.05%。 <strong><strong>NTP 并不会直接调整单调时钟向前或回拨</strong></strong> 。</p>

</article>



</body>

</html>
